CHIP ALU2{
    IN a[16], b[16], p[16], q[16], zx, nx, zy, ny, f, no, sX[2], sY[2], sA;
    OUT out[16], zr, ng;

    PARTS:
    Mux4Way16(a=a, b=b, c=p, d=q, sel=sX, out=x);
    Mux4Way16(a=a, b=b, c=p, d=q, sel=sY, out=y);
    ALU(x=x, y=y, zx=zx, nx=nx, zy=zy, ny=ny, f=f, no=no, out=o1, zr=z1, ng=n1);
    ALU(x=x, y=y, zx=zx, nx=nx, zy=zy, ny=ny, f=f, no=no, out=o2, zr=z2, ng=n2);
    Mux16(a=o1, b=o2, sel=sA, out=out);
    Mux(a=z1, b=z2, sel=sA, out=z);
    Mux(a=n1, b=n2, sel=sA, out=n);
}